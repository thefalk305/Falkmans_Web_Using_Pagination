<!DOCTYPE html>
<html lang="en">
<head>
  <title>Falkman Family History</title>
  <meta content="Falkman family history site." name="description" />
  <meta content="family history, ancestors, family, parents, grand parents, aunts & uncles, sibling, brothers & sisters, great-grandparents, cousins" name="keywords" />
  <meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type" />
  <meta content="en-us" http-equiv="Content-Language" />
  <meta content="Allen Falkman" name="author"/>
  <meta content="General" name="rating" />
  <meta content="no" http-equiv="imagetoolbar" />
  <meta content="Copyright © 2025, Allen Falkman All Rights Reserved" name="copyright" />
  <meta name="page-title" content="Genealogy Document Archives" />

  <link href="../css/magnify.css" rel="stylesheet" type="text/css" />
  <link href="../css/records.css" rel="stylesheet" type="text/css" />
  <link rel="icon" href="../assets/favicon.ico">

</head>

<body>
<div id="container">
  <div id="header"></div>
  <script src="../js/loadHeader.js"></script>

  <div id="content">
    <!-- div to 'Add New Document to the Genealogy Document Archives' -->
    <div style="margin-bottom: 1.5em;">
      <a href="record-viewer.html?mode=edit" class="edit-button">➕ Add New Document to the Genealogy Document Archives</a>
    </div>
    <!-- 'document-container' displays the names and links contained in records.json -->
    <div id="document-container"></div>

    <!-- displays the names and links contained in records.json  -->
    <script>
      fetch('../data/records.json')
        .then(res => res.json())
        .then(data => {
          // create the container that will display the individuals name and links
          const container = document.getElementById('document-container');

          // for each record in 'records.json' create a section that displays 
          // the name and the list of the records for that individual
          data.forEach(person => {
            const section = document.createElement('div');
            section.className = 'person-section';
            // <h2> to display individuals name
            const nameHeader = document.createElement('h2');
            nameHeader.textContent = person.name;
            section.appendChild(nameHeader);
            // <ul> to display the links
            const list = document.createElement('ul');
            list.className = 'doc-list';
            // Add the <li>'s that contain the links
            person.links.forEach(doc => {
              const li = document.createElement('li');

              const link = document.createElement('a');
              // const highlight = doc.highlight;
              // const notes = doc.notes || '';

              // create the link to record-viewer, appending the 'doc.id 
              // from records.json as the query parameter'
              // record-viewer.html will use this query parameter to fetch the remainder of the record to populate the page.
              link.href = `record-viewer.html?id=${doc.id}`;              
              link.target = '_blank';
              link.textContent = doc.title;

              // Append the link to the <li>
              li.appendChild(link);
              // li.appendChild(noteSpan);

              // Append the <li> to teh list
              list.appendChild(li);
            });
            // Append the list to the section
            section.appendChild(list);
            // Finally, append the section to the container
            container.appendChild(section);
          });
        })
        .catch(err => {
        // Display an error message in the console if something went wrong
          document.getElementById('document-container').textContent = 'Error loading document data.';
          console.error('Failed to load JSON:', err);
        });
    </script>
  </div>

  <div id="footer"></div>
  <script src="../js/loadFooter.js"></script>
</div>

<!-- <script type="module">
  import { initMagnifierControls } from '../js/magnifier.js';
  document.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
      initMagnifierControls();
    }, 100);
  });
</script> -->
</body>
</html>